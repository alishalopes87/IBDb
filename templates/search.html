{% extends 'base.html' %}
{% block content %}
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* {
  box-sizing: border-box;
}

body {
  font: 16px Arial;  
}

/*the container must be positioned relative:*/
.autocomplete {
  position: relative;
  display: inline-block;
}

input {
  border: 1px solid transparent;
  background-color: #f1f1f1;
  padding: 10px;
  font-size: 16px;
}

input[type=text] {
  background-color: #f1f1f1;
  width: 100%;
}

input[type=submit] {
  background-color: DodgerBlue;
  color: #fff;
  cursor: pointer;
}

.autocomplete-items {
  position: absolute;
  border: 1px solid #d4d4d4;
  border-bottom: none;
  border-top: none;
  z-index: 99;
  /*position the autocomplete items to be the same width as the container:*/
  top: 100%;
  left: 0;
  right: 0;
}

.autocomplete-items div {
  padding: 10px;
  cursor: pointer;
  background-color: #fff; 
  border-bottom: 1px solid #d4d4d4; 
}

/*when hovering an item:*/
.autocomplete-items div:hover {
  background-color: #e9e9e9; 
}

/*when navigating through the items using the arrow keys:*/
.autocomplete-active {
  background-color: DodgerBlue !important; 
  color: #ffffff; 
}
</style>
</head>     

  <h1>Search books</h1>

  <form id="getInfo">
    <label>Enter Title:
    <input type="text" id="book" name="book"></input></label>
    <input type="submit" value="Submit">
  </form>

<h2>Autocomplete</h2>

<p>Start typing:</p>

<!--Make sure the form has the autocomplete function switched off:-->
<form autocomplete="off" action="/search-subjects.json">
  <div class="autocomplete" style="width:300px;">
    <input id="myInput" type="text" name="subject" placeholder="subjects">
  </div>
  <input type="submit">
</form>
  </div>
 <form class="form-inline">
  <label class="my-1 mr-2" for="inlineFormCustomSelectPref">Preference</label>
  <select class="custom-select my-1 mr-sm-2" id="inlineFormCustomSelectPref">
    <option selected>Choose...</option>
    {% for language in languages %}
    <option value="1">{{ language }}</option>
    {% endfor%}
  </select>


  <div class="custom-control custom-checkbox my-1 mr-sm-2">
    <input type="checkbox" class="custom-control-input" id="customControlInline">
    <label class="custom-control-label" for="customControlInline">Remember my preference</label>
  </div>


 <div id="count-result"></div>
 <div id="book-results"></div>
 <div><label><b>Search Results:</label></div>
 <script src="/static/project.js"></script>
  <script type="text/javascript">
    $( document ).ready(function() {
        const dataFetcher = (request, response) => {
          $.get('/search-subjects.json?subject=' + request.term, (results) => {
              console.log(request.term)
              console.log("results", results)
              response([results])
          });
        }

        $('#myInput').autocomplete({ source: dataFetcher })
        console.log("hello")
    });
  </script>

{% endblock %}


